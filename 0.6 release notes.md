# ğŸ” Warden 0.6 Release Notes

---

## ğŸš¨ Important Notice

> Please backup your data before updating to 0.6. The database schema has been corrected with a data migration system for existing users. Your chats will be automatically migrated to the new schema upon first launch.

---

## âœ¨ Major Features

### ğŸŒ Web Search Integration
Warden now has built-in web search powered by Tavily API!

- **ğŸ” Tavily API Integration** â€” Real-time information retrieval to enhance AI responses with current data
- **ğŸ”˜ Web Search Toggle** â€” Quick toggle button in the message input area to enable/disable web search per query
- **ğŸ“¡ Visual Indicators** â€” Clear visual feedback when web search is active during streaming responses
- **âš™ï¸ Configurable Settings** â€” New Tavily preferences panel with API key management and advanced search options
- **ğŸ“š Enhanced Citations** â€” Web search results displayed as an organized sources list at the end of messages

### ğŸ¨ UI & Theme Improvements
A completely reimagined visual experience from the ground up.

| Feature | Improvement |
|---------|-------------|
| ğŸ­ **Semantic Colors** | Unified color palette throughout the entire app for professional consistency |
| ğŸ’¬ **Chat Interface** | Refined layout with better visual hierarchy and element alignment |
| ğŸš€ **Onboarding** | Redesigned with minimal, Apple-like aestheticâ€”removed animations, emojis, and extra colors for a cleaner first-run experience |
| âš™ï¸ **Preferences** | Modern, flat design with semantic chrome styling for macOS |
| ğŸ“ **Messages** | Improved formatting and consistent styling across all message displays |
| ğŸ¯ **Model Selector** | Removed visual borders and backgrounds for a seamless, minimal look |
| ğŸ”— **Web Search** | Inline hyperlinks now integrated directly into responses instead of appended sources list |
| ğŸ‘† **Sidebar Actions** | Swipe gestures show icons only for cleaner, more minimal UI |

### ğŸ¬ Smooth Animations & Transitions
New animation system for polished, responsive UI feedback.

- **ğŸ’¬ Message Arrival** â€” Messages fade in with subtle scale effect (0.35s easeOut)
- **âŒ¨ï¸ Typing Indicators** â€” Three animated variants for AI response generation feedback
- **âœ¨ Streaming Effects** â€” Subtle pulse animation while AI is generating responses (1.5s)
- **ğŸ”„ State Transitions** â€” Smooth animations for loading, error, and success states
- **ğŸ–±ï¸ Hover Feedback** â€” Interactive button scale-up animations (160ms easeOut)
- **ğŸ“± Skeleton Loaders** â€” Animated placeholder content with shimmer effect during streaming
- **â™¿ Accessibility** â€” All animations respect system reduce-motion preferences

### ğŸ—ï¸ Code Architecture Improvements
Under-the-hood enhancements for better reliability and maintainability.

- **ğŸ“‹ Message List Extraction** â€” Refactored ChatView into dedicated MessageListView for cleaner code
- **ğŸ”„ State Management** â€” Updated ChatListRow and MessageCell with ObservedObject for proper synchronization
- **âš¡ Threading** â€” Enhanced Core Data threading with improved error handling throughout
- **ğŸ¨ Animation Framework** â€” Introduced reusable animation modifiers for consistent motion across the app
- **ğŸ’¾ Core Data Modernization** â€” Introduced shared Core Data helpers for optimized fetch, count, and delete operations; converted chat load/save and migration to async/await-based flows
- **ğŸ“ File Attachment Cleanup** â€” Streamlined file type detection and consolidated image/PDF loading logic for better maintainability
- **ğŸ” API Handler Centralization** â€” Unified non-streaming send logic and API request handling to reduce code duplication

---

## ğŸ› Bug Fixes & Stability Improvements

| Issue | Resolution |
|-------|-----------|
| ğŸ“Š **Data Model Typo** | Fixed Core Data model name (warenDataModel â†’ wardenDataModel) with automatic migration |
| âŒ **App Crashes** | Replaced fatalError calls with graceful user alerts in chat, persona, and backup operations |
| ğŸ¯ **UI Alignment** | Fixed model selector behavior and layout consistency issues |
| ğŸ“– **Citations** | Improved rendering with proper source attribution and markdown support |
| ğŸ“ **Markdown in Lists** | Preserved proper markdown formatting for bullet points and numbered lists in responses |
| ğŸ”„ **Model Selector UI** | Simplified interactions by removing unnecessary hover state for cleaner design |
| ğŸ¬ **Sidebar Actions** | Replaced Label components with Image icons for action buttons in chat list |

---

## ğŸ”§ Technical Changes

```
âœ… Implemented Core Data migration system for seamless upgrades
âœ… Enhanced MessageManager with improved citation formatting
âœ… Added ClickableAttributedText component for future interactivity
âœ… Updated ForEach identity handling for reliable view updates
âœ… Improved async task handling in chat operations
âœ… Modernized Core Data persistence with async/await patterns
âœ… Centralized API handler logic for consistency and maintainability
âœ… Streamlined file attachment processing with better PDF handling
âœ… Removed deprecated markdown sources handling
```

## âš¡ Performance & Code Quality

We've made significant internal improvements to make Warden faster and more maintainable:

- **ğŸš€ Optimized Database Operations** â€” Shared Core Data helpers reduce redundant queries
- **ğŸ“¦ Reduced Code Duplication** â€” Centralized API logic and file attachment handling
- **ğŸ§¹ Cleaner Codebase** â€” Removed deprecated features and simplified complex components
- **ğŸ¯ Better Async Patterns** â€” Modern async/await throughout for cleaner, safer concurrency

---

## âš ï¸ Known Limitations

- ğŸ”‘ Web search requires a valid Tavily API key configured in preferences
- â±ï¸ Database migration on first launch may take a moment with large chat histories

---

## ğŸ“ Notes for Users

| âœ… What's Preserved | ğŸ“Œ Important Info |
|-------------------|-----------------|
| All existing chats | Automatic migration on first launch |
| All settings | Zero data loss expected |
| Personas | Seamless upgrade path |
| â€” | Version 0.5 still available if needed |

---

## ğŸ¯ What's Next?

We're continuously improving Warden. Keep an eye out for more features and refinements coming soon!


